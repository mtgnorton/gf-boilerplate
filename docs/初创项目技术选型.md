# 互联网初期项目技术选型

## 单体vs微服务
### 决策核心维度
| 评估维度 | 说明 | 评分建议（0-10分） |
|---------|------|------------------|
| 项目复杂度 | 功能模块数量，业务复杂度，是否跨多个领域 | 高分(7-10)倾向微服务 |
| 团队规模 | 当前和预期开发人数，是否有多个团队协作 | 低分(0-3)适合单体 |
| 交付周期 | 项目是否需要快速上线迭代 | 低分(0-3)优先单体 |
| 性能 | 是否有明显高并发 | 高分(7-10)偏向微服务 |
| 技术栈多样性 | 不同模块是否有使用不同语言/框架的需求 | 高分(7-10)倾向微服务 |
| 用户规模 | 项目是否预期要大规模增长 | 有增长预期可偏向微服务 |
| 技术储备 | 是否有相关技术储备 | 有技术储备可偏向微服务 |
### 评分规则

- 总分 ≤ 30：优先单体架构
- 总分 31-50：考虑拆分为模块化单体或轻量服务
- 总分 > 50：可以考虑微服务架构


### Wlink 项目评估
|评估维度   | 评分 | 说明 |
| --------- | ---- | ---- |
| 系统复杂度 | 5    | 系统本质需求为返佣平台 |
| 团队规模   | 1    | 团队规模预估4人左右,无多个团队协作 |
| 交付周期   | 3    | 要求快速开发完成项目,需要在4个月左右开发完成 |
| 性能       | 3    | 无明显高并发 |
| 技术栈多样性 | 0    | 无不同开发语言 |
| 用户规模 | 4    | 因为行业特性,用户规模不会太大,约在几十万级别 |
| 技术储备 | 3    | 技术储备不足 |

- 总得分 16 ,优先单体架构


## goframe vs gin

### 基础对比

| 维度          | GoFrame                       | Gin                          |
| ----------- | ----------------------------- | ---------------------------- |
| **定位**      | 全栈开发框架（Web + ORM + CLI + 工具链） | 轻量高性能 Web 框架                 |
| **上手难度**    | 略高（功能丰富，概念较多）                 | 较低（核心功能少，容易掌握）               |
| **功能集成度**   | ⭐⭐⭐⭐⭐ 一站式支持常用功能               | ⭐⭐ 只提供基础路由、中间件等功能            |
| **开发效率**    | 高：CLI 工具 + 代码生成器 + 热更新        | 依赖第三方库 + 手动集成，效率一般           |
| **项目结构**    | 默认规范化、模块化，支持 DDD              | 无固定结构，自由灵活，初学者可能结构混乱         |
| **ORM 支持**  | 内置强大 ORM（gdb）                 | 无内置 ORM，需选用 GORM / ent 等     |
| **路由能力**    | 功能完备，支持 REST、分组、中间件、控制器映射     | 功能强大，灵活可控，社区成熟               |
| **配置管理**    | 内置配置系统，支持多环境、JSON/YAML/ENV    | 需手动接入 viper 等配置库             |
| **文档与中文支持** | 文档齐全，官方中文文档丰富，适合中文用户          | 官方文档英文为主，中文资料多为社区贡献          |
| **性能表现**    | ⭐⭐⭐⭐ 几乎接近 Gin，稍重但足够快          | ⭐⭐⭐⭐⭐ 极致性能，原生 net/http 封装，极轻 |
| **学习成本**    | 中等偏高，需要理解框架整体思想               | 较低，适合快速上手                    |
| **生态成熟度**   | 相对较小但官方维护稳定，生态成型              | 非常成熟，社区广泛，配套中间件丰富            |
| **适合项目类型**  | 中大型项目、需要快速搭建后台系统、管理平台、B/S 应用  | 小而快的服务、API 网关、微服务组件、灵活型项目    |

### 微服务支持对比
| 微服务功能维度      | **GoFrame**                                        | **Gin**                          |                                                                 |
| ------------ | -------------------------------------------------- | -------------------------------- | --------------------------------------------------------------- |
| **服务注册与发现**  | ✅ 内置 `gsvc` 组件，支持多种注册中心（如 etcd、zookeeper、polaris）  | ❌ 无内置支持，需手动集成第三方库（如 etcd、Consul） |                                                                 |
| **RPC 支持**   | ✅ 内置 `grpcx` 模块，支持 gRPC 服务的快速开发                    | ❌ 无内置支持，需手动集成 gRPC 相关库           |                                                                 |
| **服务间通信**    | ✅ 支持 HTTP 和 gRPC 协议，提供统一的服务治理机制                    | ✅ 支持 RESTful 通信，gRPC 需手动集成       |                                                                 |
| **配置中心支持**   | ✅ 内置配置管理，支持多种配置中心（如 Nacos、Consul、Apollo）           | ❌ 无内置支持，需手动集成配置中心                |                                                                 |
| **链路追踪**     | ✅ 支持 OpenTelemetry，内置链路追踪功能                        | ❌ 无内置支持，需手动集成 OpenTelemetry 等工具  |                                                                 |
| **熔断与限流**    | ❌ 无内置支持，需集成如 Sentinel 等第三方库                        | ❌ 无内置支持，需集成如 Sentinel 等第三方库      |                                                                 |
| **服务网关**     | ❌ 无内置支持，需配合 Kong、APISIX 等使用                        | ❌ 无内置支持，需配合 Kong、APISIX 等使用      |                                                                 |
| **容器与部署支持**  | ✅ 提供 CLI 工具，支持快速构建和部署                              | ✅ 轻量框架，易于容器化部署                   |                                                                 |
| **项目结构与模块化** | ✅ 支持模块化开发，适合微服务架构                                  | ❌ 无默认模块化支持，需自行规划                 |                                                                 |
| **中间件支持**    | ✅ 提供丰富的中间件支持                                       | ✅ 提供丰富的中间件支持                     | ([goframe.org][1], [Gin Web Framework][2], [LogRocket Blog][3]) |

[1]: https://goframe.org/en/docs/micro-service?utm_source=chatgpt.com "Microservice Development | GoFrame - A powerful framework for faster, easier, and more efficient project development"
[2]: https://gin-gonic.com/docs/introduction/?utm_source=chatgpt.com "Introduction | Gin Web Framework"
[3]: https://blog.logrocket.com/building-microservices-go-gin?utm_source=chatgpt.com "Building microservices in Go with Gin - LogRocket Blog"

## 代码库对比
### 代码量对比:
 goframe 
| Language          | files | blank  | comment | code   |
|------------------|-------|--------|---------|--------|
| Go               | 1496  | 29452  | 33186   | **200383** |
| YAML             | 37    | 167    | 251     | 1912   |
| SQL              | 40    | 211    | 91      | 1219   |
| TOML             | 23    | 22     | 16      | 278    |
| Bourne Shell     | 6     | 58     | 40      | 240    |
| XML              | 10    | 0      | 0       | 194    |
| Text             | 12    | 4      | 0       | 179    |
| Protocol Buffers | 7     | 33     | 18      | 85     |
| JSON             | 19    | 3      | 0       | 77     |
| Markdown         | 2     | 27     | 0       | 77     |
| HTML             | 31    | 0      | 0       | 71     |
| make             | 2     | 10     | 8       | 63     |
| INI              | 6     | 0      | 0       | 13     |
| Properties       | 2     | 3      | 0       | 8      |
| CSS              | 1     | 0      | 0       | 4      |

gin
| Language         | files | blank | comment | code  |
|-----------------|-------|-------|---------|-------|
| Go              | 93    | 3120  | 3189    | **14158** |
| Markdown        | 11    | 780   | 4       | 3700  |
| YAML            | 7     | 26    | 41      | 246   |
| make            | 1     | 10    | 9       | 87    |
| Protocol Buffers| 1     | 2     | 0       | 10    |
| SUM             | 113   | 3938  | 3243    | 18201 |

### 其他对比
| 项目     | 项目开始时间 | 未解决bug数 | 贡献者 | star数量 |
|---------|------------|------------|--------|----------|
| goframe | 2017-06    | 68         | 218    | 12.4k    |
| gin     | 2014-06    | 14         | 456    | 82.3k    |

### 总结
选择goframe的主要原因如下:
- 团队协作需要良好的工程化实践和代码规范。
- 希望获得“全家桶”式的开发体验，减少技术选型和集成第三方库的麻烦。快速提升开发效率
- 后期部分模块如果需要微服务化,配合istio的熔断和限流,负载均衡,goframe的内置组件可以快速实现迁移

